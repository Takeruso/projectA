import{a as e}from"./index-BTvahscA.js";import{_ as t,c as a,b as s,d as l,a as o,w as i,r,t as c,i as d,j as n,u as p,F as u,l as m,e as y,q as h}from"./index-DNfTXETz.js";const f={class:"staff-page"},v={class:"container header-container"},x={class:"container"},b={class:"row align-items-center"},S={class:"welcome-banner col-8 mx-2"},g={class:"welcome-banner col-3"},w={class:"text-2xl font-bold mt-1"},T={class:"mb-4 text-center"},C={class:"flex flex-wrap gap-4 justify-center items-center mb-6"},F={class:"overflow-x-auto"},k={class:"min-w-full table-auto bordered-table"},D={class:"px-4 py-2"},A={class:"px-4 py-2"},L={class:"px-4 py-2"},N={class:"px-4 py-2"},R={class:"px-4 py-2"},U={key:0};const B=t({name:"FacilityCheckup",data:()=>({selectedStatus:"",selectedType:"",facilityData:[]}),computed:{todayDate:()=>(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),filteredFacilities(){let e=this.facilityData.filter((e=>{const t=!this.selectedStatus||e.status.toLowerCase()===this.selectedStatus.toLowerCase(),a=!this.selectedType||e.type.toLowerCase()===this.selectedType.toLowerCase();return t&&a}));const t=new Set;return e.filter((e=>!t.has(e.roomNo)&&(t.add(e.roomNo),!0)))}},methods:{async fetchFacilities(){try{const t=await e.get("/api/rooms");if(!Array.isArray(t.data))return void console.error("Expected array, but got:",t.data);this.facilityData=t.data.map((e=>({roomNo:e.id,type:this.mapType(e.type),occupant:"",status:this.mapStatus(e.status),lastChecked:this.generateDummyTime()})))}catch(t){console.error("Failed to load facilities:",t)}},mapType:e=>"single"===e?"Private":"shared"===e?"Shared":"2-bedroom standard"===e?"2-Bedroom Standard":"3-bedroom standard"===e?"3-Bedroom Standard":e.charAt(0).toUpperCase()+e.slice(1),mapStatus:e=>"vacant"===e?"Available":"occupied"===e?"Occupied":"reserved"===e?"Reserved":"cleaning"===e?"Cleaning":e.charAt(0).toUpperCase()+e.slice(1),generateDummyTime:()=>(new Date).toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,month:"short",day:"2-digit",year:"numeric"}),resetFilters(){this.selectedStatus="",this.selectedType=""}},mounted(){this.fetchFacilities()}},[["render",function(e,t,B,j,O,_){const q=r("router-link");return y(),a("div",f,[s("header",null,[s("div",v,[l(q,{to:"/staff",class:"logo"},{default:i((()=>t[3]||(t[3]=[s("span",null,"Swin Care",-1)]))),_:1}),t[4]||(t[4]=o('<div class="user-info" data-v-d84946e8><button class="notifications-btn" data-v-d84946e8> 🏥 <span class="alert-count" data-v-d84946e8>2</span></button><div class="user-name" data-v-d84946e8>Serena Tr</div><div class="user-avatar" data-v-d84946e8>ST</div></div>',1))])]),s("main",x,[s("div",b,[s("div",S,[t[5]||(t[5]=s("h1",null,"Facility Checkup",-1)),s("p",null," Today is "+c(_.todayDate)+". Below is the current room usage status. ",1)]),s("div",g,[t[6]||(t[6]=s("p",null,[s("b",null,"Total Rooms")],-1)),s("p",w," Count: "+c(_.filteredFacilities.length),1)])]),s("div",T,[s("button",{onClick:t[0]||(t[0]=(...e)=>_.resetFilters&&_.resetFilters(...e)),class:"refresh-btn"},"Reset Filters")]),s("div",C,[d(s("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>O.selectedStatus=e),class:"filter-dropdown"},t[7]||(t[7]=[s("option",{value:""},"All Statuses",-1),s("option",null,"Occupied",-1),s("option",null,"Reserved",-1),s("option",null,"Available",-1)]),512),[[n,O.selectedStatus]]),d(s("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>O.selectedType=e),class:"filter-dropdown"},t[8]||(t[8]=[s("option",{value:""},"All Room Types",-1),s("option",null,"Private",-1),s("option",null,"Shared",-1),s("option",null,"2-Bedroom Standard",-1),s("option",null,"3-Bedroom Standard",-1)]),512),[[n,O.selectedType]])]),s("div",F,[s("table",k,[t[10]||(t[10]=s("thead",{class:"facility-table-header"},[s("tr",null,[s("th",{class:"px-4 py-2 text-left"},"Room No"),s("th",{class:"px-4 py-2 text-left"},"Type"),s("th",{class:"px-4 py-2 text-left"},"Occupant"),s("th",{class:"px-4 py-2 text-left"},"Status"),s("th",{class:"px-4 py-2 text-left"},"Last Checkup")])],-1)),s("tbody",null,[(y(!0),a(u,null,m(_.filteredFacilities,(e=>(y(),a("tr",{key:e.roomNo+e.occupant},[s("td",D,c(e.roomNo),1),s("td",A,c(e.type),1),s("td",L,c(e.occupant||"—"),1),s("td",N,[s("span",{class:h({"text-green-500 font-semibold":"Available"===e.status,"text-yellow-400 font-semibold":"Reserved"===e.status,"text-red-500 font-semibold":"Occupied"===e.status})},c(e.status),3)]),s("td",R,c(e.lastChecked),1)])))),128)),0===_.filteredFacilities.length?(y(),a("tr",U,t[9]||(t[9]=[s("td",{colspan:"5",class:"px-4 py-4 text-center text-gray-500"}," No rooms match your current filter. ",-1)]))):p("",!0)])])])])])}],["__scopeId","data-v-d84946e8"]]);export{B as default};
